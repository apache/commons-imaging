<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!--
This file is used by the maven-changes-plugin to generate the release notes.
Useful ways of finding items to add to this file are:

1.  Add items when you fix a bug or add a feature (this makes the 
release process easy :-).

2.  Do a Jira search for tickets closed since the previous release.

3.  Use the report generated by the maven-changelog-plugin to see all
CVS commits.  Set the project.properties' maven.changelog.range 
property to the number of days since the last release.


To generate the release notes from this file:

mvn changes:announcement-generate -Prelease-notes [-Dchanges.version=nnn]

then tweak the source formatting if necessary and regenerate, then commit

The <action> type attribute can be add,update,fix,remove.
-->

<document>
  <properties>
    <title>Release Notes</title>
  </properties>
  <body>

    <release version="1.0" date="TBA" description="TBA">
      <action issue="IMAGING-23" dev="cmchen" type="fix">
        JpegXMPWriter throws NullPointerException.
      </action>
      <action issue="IMAGING-75" dev="cmchen" type="add">
        Added accessor methods for a number of ImageInfo properties.
      </action>
      <action issue="IMAGING-71" dev="cmchen" type="add" due-to="Nicolas Richeton">
        Applied patch contributed by Nicolas Richeton, adding getEXIFThumbnailSize() and getEXIFThumbnailData() methods to JpegImageMetadata.
      </action>
      <action issue="IMAGING-74" dev="cmchen" type="fix">
        Fixed a couple of platform-dependent paths in the tests.
        Constantized the magic numbers used when guessing formats.  
        Added a test for the format guessing.
      </action>
      <action issue="IMAGING-2" dev="cmchen" type="fix">
        SanselanGuessFormatTest and SanselanTestConstants use Java 1.5 method String.replace(CharSequence, CharSequence).
      </action>
      <action issue="IMAGING-80" dev="niallp" type="fix">
        Sanselan tests fail on Windows.
      </action>
      <action issue="IMAGING-18" dev="cmchen" type="fix" due-to="James E-J">
        Fix for "JpegImageMetadata getEXIFThumbnail only works on Jpeg thumbnails stored as Tiff images" issue.
        Jpeg thumbnails are read using ImageIO.
      </action>
      <action issue="IMAGING-48" dev="sebb" type="fix">
        JpegImageMetadata getEXIFThumbnail may raise a null pointer exception.
      </action>
      <action issue="IMAGING-56" dev="cmchen" type="add" due-to="damjan">
        Add support for the ICNS icon format.
      </action>
      <action issue="IMAGING-52" dev="cmchen" type="fix" due-to="damjan">
        Implement dumpImageFile for ICO files and fix a typo.
      </action>
       <action issue="IMAGING-58" dev="damjan" type="add">
        Add support for PCX, DCX, WBMP, XBM and XPM images.
      </action>
      <action issue="IMAGING-12" dev="damjan" type="fix" due-to="gwlucas">
        Tiff (exif) tags of type double written in wrong byte order.
      </action>
      <action issue="IMAGING-30" dev="damjan" type="fix" due-to="clement.escoffier">
        The isTransparent flag is not set on transparent PNGs.
      </action>
      <action issue="IMAGING-11" dev="damjan" type="fix">
        Ignore TIFF entries that have invalid offsets and/or lengths when we are not in strict mode.
      </action>
      <action issue="IMAGING-78" dev="damjan" type="fix">
        readDirectory method in TiffReader doesn't gracefully handle exceptions that can be thrown from ByteSource implementations.
      </action>
      <action issue="IMAGING-24" dev="damjan" type="fix">
        Search all tags instead of just EXIF tags when parsing TIFF metadata tags, and try to match on directory type as well.
      </action>
      <action issue="IMAGING-21" dev="damjan" type="fix">
        Don't allow very large TIFF lengths to be interpreted as negative because they have the highest order bit set.
      </action>
      <action issue="IMAGING-50" dev="damjan" type="fix">
        Make JPEG parsing highly resilient: skip all bytes after the end of a segment until the next segment (0xFF followed by non-0xFF).
      </action>
      <action issue="IMAGING-16" dev="damjan" type="fix">
        Fix reading ASCII tags in TIFF files.
      </action>
      <action issue="IMAGING-3" dev="damjan" type="fix">
        Ignore string differences in our tests when 7 bit unclean TIFF string are copied.
      </action>
      <action issue="IMAGING-41" dev="damjan" type="fix">
        Don't redefine BYTE_ORDER_BIG_ENDIAN and BYTE_ORDER_LITTLE_ENDIAN in UnicodeMetricsUTF16.
      </action>
      <action issue="IMAGING-64" dev="damjan" type="add">
        Add support for TIFF files with compression=2, (CCITT Group 3 1-Dimensional Modified Huffman run length encoding).
      </action>
      <action issue="IMAGING-35" dev="cmchen" type="fix">
        Fixed issue "FieldTypeASCII does not conform to the EXIF specification," identified by Libor Nenad√°l.
      </action>
      <action issue="IMAGING-31" dev="cmchen" type="fix">
        Fixed a bug in which gifs have incorrect size information in the the Logical Screen Descriptor.
        This appears to be a bug in how Microsoft Office writes gifs. The Image Descriptor has the correct value.
      </action>
      <action issue="IMAGING-13" dev="cmchen" type="fix">
        Added checks in ByteSource's getBlock() methods for invalid params.
      </action>
      <action issue="IMAGING-46" dev="cmchen" type="fix">
        Fixed a possible NPE in Sanselan.getICCProfile pointed out by Jon Weygandt.
      </action>
      <action issue="IMAGING-76" dev="cmchen" type="fix" due-to="damjan">
        Improve ICO file support.
      </action>
      <action issue="IMAGING-49" dev="damjan" type="fix">
        Preserve the byte range occupied by the Maker Notes, so rewriting it doesn't corrupt it.
      </action>
      <action issue="IMAGING-29" dev="damjan" type="fix" due-to="alexvigdor">
        Read in the full IPTC block before trying to ignore it, so we don't lose our position in the stream.
      </action>
      <action issue="IMAGING-45" dev="damjan" type="fix" due-to="pkapoor">
        Fix the GIF BitsPerPixel formula in GifImageParser's getImageInfo().
      </action>
      <action issue="IMAGING-77" dev="damjan" type="add">
        Add a type-safe high-level API for writing TIFF fields.
      </action>
      <action issue="IMAGING-51" dev="damjan" type="add">
        Add TagInfoXpText for fields like XPTITLE, and encode/decode it using UTF-16LE like Windows does.
      </action>
      <action issue="IMAGING-39" dev="damjan" type="fix">
        Fix various problems with reading and writing EXIF tags.
      </action>
      <action issue="IMAGING-60" dev="damjan" type="add" due-to="proyal">
        Added support for reading the RGBE / Radiance HDR image format.
      </action>
      <action issue="IMAGING-68" dev="damjan" type="add">
        Add a field to IptcRecord that contains its raw bytes, and a getter for this value.
      </action>
      <action issue="IMAGING-73" dev="damjan" type="add">
        Provide a way to write EXIF data into files using Sanselan.writeImage().
      </action>
      <action issue="IMAGING-22" dev="damjan" type="fix">
        Eliminate or hide public mutable final arrays in the API.
      </action>
      <action issue="IMAGING-47" dev="damjan" type="add" due-to="adrian2k7">
        Run a Findbugs analysis on "mvn site". Also audit and fix resource leaks.
      </action>
      <action issue="IMAGING-43" dev="damjan" type="fix" due-to="pkapoor">
        If the TIFF rows per strip is not present, assume it is the image length.
      </action>
      <action issue="IMAGING-65" dev="damjan" type="add">
        Provide a way to write the pixel density (DPI) into an image.
      </action>
      <action issue="IMAGING-17" dev="damjan" type="fix" due-to="pkapoor">
        Make BitInputStream sensitive to byte order. Allows 48 BPP TIFF files to load.
      </action>
      <action issue="IMAGING-38" dev="damjan" type="fix" due-to="tjoris">
        Fix the PhysicalWidthDpi calculation for JPEG images.
      </action>
      <action issue="IMAGING-19" dev="damjan" type="fix" due-to="vvd">
        Fix reading DPI for TIFF files.
      </action>
      <action issue="IMAGING-44" dev="damjan" type="fix" due-to="vvd">
        Fix reading DPI for PNG files.
      </action>
      <action issue="IMAGING-40" dev="damjan" type="fix" due-to="pkapoor">
        Add the Software TIFF tag, and get the byte order after reading the first TIFF directory.
      </action>
      <action issue="IMAGING-6" dev="damjan" type="fix">
        Correct the expected size of the decompressed TIFF image data, and improve sample depth scaling for PNG images.
      </action>
      <action issue="IMAGING-15" dev="damjan" type="fix" due-to="pkapoor">
        Stop JpegImageMetadata from throwing NPE if the exif field is null.
      </action>
      <action issue="IMAGING-67" dev="damjan" type="fix" due-to="gwlucas">
        Speed up reading paletted TIFF files.
      </action>
      <action issue="IMAGING-8" dev="damjan" type="fix">
        Allow TIFF fields to change size during encoding. Fix a broken test that assumes they never do.
      </action>
      <action issue="IMAGING-36" dev="damjan" type="fix">
        Fix sample usage links on the website.
      </action>
      <action issue="IMAGING-70" dev="damjan" type="fix" due-to="gwlucas">
        Reduce memory usage when reading TIFF files.
      </action>
      <action issue="IMAGING-33" dev="damjan" type="fix">
        Fixed the differencing predictor for tiled TIFF images.
      </action>
      <action issue="IMAGING-5" dev="damjan" type="fix">
        Update website, fix some broken links and remove old code.
      </action>
      <action issue="IMAGING-61" dev="damjan" type="add" due-to="gwlucas">
        Include a test utility for timing and memory in project example classes.
      </action>
      <action issue="IMAGING-69" dev="damjan" type="fix" due-to="gwlucas">
        Add a streamlined TIFF reader that reduces load time by a factor of 5.
      </action>
      <action issue="IMAGING-81" dev="damjan" type="add" due-to="gwlucas">
        Add more Javadoc to main package.
      </action>
      <action issue="IMAGING-82" dev="damjan" type="fix" due-to="pkapoor">
        Fix BMP width and height DPI.
      </action>
      <action issue="IMAGING-86" dev="damjan" type="fix">
        Fix the lengths for DateTimeOriginal and DateTimeDigitized TIFF/EXIF tags.
      </action>
      <action issue="IMAGING-88" dev="damjan" type="fix" due-to="craigkelly">
        Method lowerBound in org.apache.commons.imaging.common.itu_t4.T4AndT6Compression has a division error.
      </action>
      <action issue="IMAGING-89" dev="damjan" type="add">
        Detect the YCCK color space/type in JPEG files' APP14 segment.
      </action>
      <action issue="IMAGING-92" dev="damjan" type="fix" due-to="hmarmy">
        Issue trying to update GPS metadata info in a JPG.
      </action>
      <action issue="IMAGING-91" dev="damjan" type="update">
         ByteSourceInputStream.streamLength could be a long.
      </action>
      <action issue="IMAGING-95" dev="damjan" type="update" due-to="amitgupt">
         Some tiff processing takes very long.
      </action>
      <action issue="IMAGING-93" dev="damjan" type="fix" due-to="gwlucas">
         Tiled TIFF images do not correctly load partial tiles.
      </action>
      <action issue="IMAGING-90" dev="damjan" type="fix">
         Allow non-1 TIFF field lengths when parsing offset fields in non-strict mode.
      </action>
      <action issue="IMAGING-99" dev="damjan" type="fix" due-to="st.h">
         java.io.IOException: Could not read block
      </action>
      <action issue="IMAGING-94" dev="damjan" type="add" due-to="gwlucas">
         Add ability to load partial TIFF images
      </action>
    </release>
    
  </body>
</document>
